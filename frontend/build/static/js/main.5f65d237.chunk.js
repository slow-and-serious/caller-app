(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),l=a(29),c=a(11),s=a(36);a(104);function m(e){return r.a.createElement("div",null,e.items.message)}var u=a(56),p=a(159);var d=function(e){return function(t){var a=t.isLoading,n=Object(u.a)(t,["isLoading"]);return a?r.a.createElement(p.a,null):r.a.createElement(e,n)}},f=a(60),g=a.n(f),h=a(82),E=a(83),b="http://localhost:8000/api/v1/",v=a.n(E).a.create({baseURL:b,timeout:5e3,headers:{authorization:sessionStorage.getItem("access_token")?"JWT "+sessionStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}});v.interceptors.response.use((function(e){return e}),function(){var e=Object(h.a)(g.a.mark((function e(t){var a,n,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,"undefined"!==typeof t.response){e.next=4;break}return console.log("Unknown error"),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||a.url!==b+"user/token/refresh"){e.next=7;break}return window.location.href="/login/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=23;break}if(!(n=sessionStorage.getItem("refresh_token"))){e.next=21;break}if(r=JSON.parse(atob(n.split(".")[1])),o=Math.ceil(Date.now()/1e3),console.log(n),!(r.exp>o)){e.next=17;break}return e.abrupt("return",v.post("user/token/refresh",{refresh:n}).then((function(e){return sessionStorage.setItem("access_token",e.data.access),sessionStorage.setItem("refresh_token",e.data.refresh),v.defaults.headers.Authorization="JWT "+e.data.access,a.headers.Authorization="JWT "+e.data.access,window.location.reload(),v(a)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",r.exp,o),window.location.href="/login";case 19:e.next=23;break;case 21:console.log("Refresh token not available."),window.location.href="/login";case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var k=v;var y=function(){var e=d(m),t=Object(n.useState)({loading:!0,items:null}),a=Object(s.a)(t,2),o=a[0],i=a[1];return Object(n.useEffect)((function(){k.get("notification/test").then((function(e){var t=e?e.data:"Unauthorized";i({loading:!1,items:t})}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Items"),r.a.createElement(e,{isLoading:o.loading,items:o.items}))},w=a(84),x=a(48),j=a(163),S=a(164),O=a(165),T=a(181),N=a(162),_=Object(N.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},footer:Object(w.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}}));function I(){return r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(j.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var W=[{title:"Company",description:["Team","History","Contact us","Locations"]},{title:"Features",description:["Cool stuff","Random feature","Team feature","Developer stuff","Another one"]},{title:"Resources",description:["Resource","Resource name","Another resource","Final resource"]},{title:"Legal",description:["Privacy policy","Terms of use"]}];var A=function(){var e=_();return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{maxWidth:"md",component:"footer",className:e.footer},r.a.createElement(O.a,{container:!0,spacing:4,justify:"space-evenly"},W.map((function(e){return r.a.createElement(O.a,{item:!0,xs:6,sm:3,key:e.title},r.a.createElement(x.a,{variant:"h6",color:"textPrimary",gutterBottom:!0},e.title),r.a.createElement("ul",null,e.description.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(j.a,{href:"#",variant:"subtitle1",color:"textSecondary"},e))}))))}))),r.a.createElement(T.a,{mt:5},r.a.createElement(I,null))))},L=a(166),C=a(167),R=a(168),B=a(169),D=a(170),F=a(171),P=a(172),z=Object(N.a)((function(e){return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},link:{margin:e.spacing(1,1.5)},toolbarTitle:{flexGrow:1},navDisplayFlex:{display:"flex",justifyContent:"space-between"},linkText:{textDecoration:"none",textTransform:"uppercase",color:"black"}}}));var J=function(){var e=z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null),r.a.createElement(C.a,{position:"static",color:"default",elevation:0,className:e.appBar},r.a.createElement(R.a,{className:e.toolbar},r.a.createElement(x.a,{variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle},r.a.createElement(j.a,{component:l.b,to:"/",underline:"none",color:"textPrimary"},"Caller App")),r.a.createElement(B.a,{component:"nav","aria-labelledby":"main navigation",className:e.navDisplayFlex},[{title:"Notification History",path:"/notification-history"}].map((function(t){var a=t.title,n=t.path;return r.a.createElement("a",{href:n,key:a,className:e.linkText},r.a.createElement(D.a,{button:!0},r.a.createElement(F.a,{primary:a})))}))),r.a.createElement(P.a,{href:"#",color:"primary",variant:"outlined",className:e.link,component:l.b,to:"/login"},"Login"),r.a.createElement(P.a,{href:"#",color:"primary",variant:"outlined",className:e.link,component:l.b,to:"/logout"},"Logout"))))},M=a(183),U=a(174),q=a(182),H=a(24),Z=a(63),Y=Object(N.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var $=function(e){return function(t){var a=t.isLoading,n=Object(u.a)(t,["isLoading"]);return a?r.a.createElement(U.a,null):r.a.createElement(e,n)}},G=a(175),V=a(131),K=a(176),Q=a(177),X=a(178),ee=a(179),te=a(180),ae=Object(N.a)({table:{minWidth:650}});function ne(e){var t=ae(),a=e.rows,n=e.headers;return r.a.createElement(G.a,{component:V.a},r.a.createElement(K.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(Q.a,null,r.a.createElement(X.a,null,n.map((function(e,t){return r.a.createElement(ee.a,{align:"left",key:t},e)})))),r.a.createElement(te.a,null,a.map((function(e){return r.a.createElement(X.a,{key:e.id},r.a.createElement(ee.a,{align:"left"},e.id),r.a.createElement(ee.a,{align:"left"},e.start_date_time),r.a.createElement(ee.a,{align:"left"},e.notification_type),r.a.createElement(ee.a,{align:"left"},e.message),r.a.createElement(ee.a,{align:"left"},e.manager),r.a.createElement(ee.a,{align:"left"},e.user_response),r.a.createElement(ee.a,{align:"left"},e.completed?"Completed":"Not completed"))})))))}var re=Object(N.a)({header:{textAlign:"center",padding:"1rem",marginBottom:"1rem"}});a(128),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=r.a.createElement(l.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null),r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:y}),r.a.createElement(c.a,{exact:!0,path:"/login",component:function(){var e=Y(),t=Object(c.f)(),a=Object(n.useState)(""),o=Object(s.a)(a,2),i=o[0],l=o[1];return r.a.createElement(H.c,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4&&(t.password="Password length must be greater than 4 characters"):t.password="Required",t},onSubmit:function(e,a){var n=a.setSubmitting;l(""),k.post("user/login",{email:e.email,password:e.password}).then((function(e){sessionStorage.setItem("access_token",e.data.access),sessionStorage.setItem("refresh_token",e.data.refresh),k.defaults.headers.Authorization="JWT "+sessionStorage.getItem("access_token")})).then((function(){t.push("/"),window.location.reload()})).catch((function(e){l("The email and password do not match our records")})),setTimeout((function(){n(!1)}),800)}},(function(t){var a=t.submitForm,n=t.isSubmitting;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(L.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(M.a,{className:e.avatar}),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),i&&r.a.createElement(q.a,{severity:"error"},i),r.a.createElement(H.b,{className:e.form},r.a.createElement(H.a,{component:Z.a,name:"email",type:"email",label:"Email Address",variant:"outlined",margin:"normal",fullWidth:!0,autoFocus:!0}),r.a.createElement("br",null),r.a.createElement(H.a,{component:Z.a,type:"password",label:"Password",name:"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0}),n&&r.a.createElement(U.a,null),r.a.createElement("br",null),r.a.createElement(P.a,{variant:"contained",fullWidth:!0,color:"primary",className:e.submit,disabled:n,onClick:a},"Submit"))))}))}}),r.a.createElement(c.a,{exact:!0,path:"/notification-history",component:function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),l=Object(s.a)(i,2),c=l[0],m=l[1],u=re(),p=$(ne);return Object(n.useEffect)((function(){k.get("notification/notification-history").then((function(e){o(e.data),m(!1)}))}),[]),r.a.createElement(S.a,null,r.a.createElement(x.a,{variant:"h3",className:u.header},"Notification History"),r.a.createElement(p,{isLoading:c,rows:a,headers:["ID","Date","Notification Type","Message","Manager","Response","Status"]}))}}),r.a.createElement(c.a,{exact:!0,path:"/logout",component:function(){var e=Object(c.f)();return Object(n.useEffect)((function(){k.post("user/logout/blacklist",{refresh_token:sessionStorage.getItem("refresh_token")}),sessionStorage.removeItem("access_token"),sessionStorage.removeItem("refresh_token"),k.defaults.headers.Authorization=null,e.push("/login")})),r.a.createElement("div",null,"Logout")}})),r.a.createElement(A,null)));i.a.render(oe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,a){e.exports=a(129)}},[[99,1,2]]]);
//# sourceMappingURL=main.5f65d237.chunk.js.map